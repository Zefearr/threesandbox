!function(e){var a={};function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var r in e)t.d(n,r,function(a){return e[a]}.bind(null,r));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=9)}([,function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.materials={initMaterials:function(e,a){var t,n={color:void 0===a?"rgb(255, 255, 255)":a};switch(e){case"basic":t=new THREE.MeshBasicMaterial(n);break;case"lambert":t=new THREE.MeshLambertMaterial(n);break;case"phong":t=new THREE.MeshPhongMaterial(n);break;case"standard":t=new THREE.MeshStandardMaterial(n);break;default:t=new THREE.MeshBasicMaterial(n)}return t}}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}();var r=function(){function e(){return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=new THREE.LoadingManager,this.events(),this.manager}return n(e,[{key:"events",value:function(){document.getElementById("webglWrapper");var e=document.createElement("div");this.manager.onStart=function(a,t,n){console.log("Started loading file: "+a+".\nLoaded "+t+" of "+n+" files."),e.className="splash-screen",document.body.appendChild(e),e.innerHTML='\n            <h3>Loading...</h3>\n            <div class="infinityChrome">\n    <div></div>\n    <div></div>\n    <div></div>\n</div>\n\n\x3c!-- Safari and others --\x3e\n<div class="infinity">\n    <div>\n        <span></span>\n    </div>\n    <div>\n        <span></span>\n    </div>\n    <div>\n        <span></span>\n    </div>\n</div>\n\n\x3c!-- Stuff --\x3e\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="display: none;">\n    <defs>\n        <filter id="goo">\n            <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur" />\n            <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />\n            <feBlend in="SourceGraphic" in2="goo" />\n        </filter>\n    </defs>\n</svg>\n            ',e.classList.add("loading")},this.manager.onLoad=function(){var e=document.querySelector(".splash-screen");document.body.removeChild(e)}}}]),e}();a.default=r},,,,,function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.lights={getDirectionalLight:function(e){var a=new THREE.DirectionalLight(16777190,e);return a.castShadow=!0,a.shadow.camera.left=-20,a.shadow.camera.bottom=-20,a.shadow.camera.right=20,a.shadow.camera.top=20,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,a},getSpotLight:function(e){var a=new THREE.PointLight(16777190,e);return a.castShadow=!0,a.shadow.bias=.001,a.castShadow=!0,a.shadow.camera.left=-20,a.shadow.camera.bottom=-20,a.shadow.camera.right=20,a.shadow.camera.top=20,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,a},getPointLight:function(e){return new THREE.PointLight("white",e)},getAmbientLight:function(e){return new THREE.AmbientLight(8498891,e)}}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.models=void 0;var n=t(1);var r=new(function(e){return e&&e.__esModule?e:{default:e}}(t(2)).default);a.models=function(){var e=new THREE.FBXLoader(r),a=new THREE.TextureLoader(r);return{getBox:function(e,a,t,n){var r=new THREE.BoxGeometry(a,t,n),o=new THREE.Mesh(r,e);return o.castShadow=!0,o},getSphere:function(e,a,t){var n=new THREE.SphereGeometry(a,t,t);return new THREE.Mesh(n,e)},getGlass:function(){var a=new THREE.Group;a.name="windows";var t=n.materials.initMaterials("standard",16777215);return t.transparent=!0,t.opacity=.7,t.side=THREE.DoubleSide,e.load("./assets/models/glasses.fbx",function(e){e.material=t,e.scale.x=1,e.scale.y=1,e.scale.z=1,e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=t,e.castShadow=!0,e.receiveShadow=!0)}),a.add(e)}),a},getInsidePart:function(){var t=new THREE.Group;t.name="insidePartGrp";var r=n.materials.initMaterials("phong","white");return r.map=a.load("./assets/images/textures/inside_part_unity_shader_lambert13_AlbedoTransparency.png"),r.metalnessMap=a.load("./assets/images/textures/inside_part_unity_shader_lambert13_MetallicSmoothness.png"),r.normalMap=a.load("./assets/images/textures/inside_part_unity_shader_lambert13_Normal.png"),r.normalScale=new THREE.Vector2(.2,.2),e.load("./assets/models/inside_part3.fbx",function(e){e.material=r,e.scale.x=1,e.scale.y=1,e.scale.z=1,r.side=THREE.DoubleSide,r.roughness=1,e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=r,e.castShadow=!0,e.receiveShadow=!0)}),t.add(e)}),t},loadPlatform:function(){var t=new THREE.Group;t.name="platformGrp";var r=n.materials.initMaterials("standard","white");return e.load("./assets/models/platform.fbx",function(e){e.material=r,e.scale.x=1,e.scale.y=1,e.scale.z=1,e.position.y=.7,e.castShadow=!0,e.receiveShadow=!0,r.map=a.load("./assets/images/textures/platform_lambert16_AlbedoTransparency.png"),r.metalnessMap=a.load("./assets/images/textures/platform_lambert16_MetallicSmoothness.png"),r.roughness=1,r.normalMap=a.load("./assets/images/textures/platform_lambert16_Normal.png"),r.normalScale=new THREE.Vector2(1,1),e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=r,e.castShadow=!0,e.receiveShadow=!0)}),t.add(e)}),t.position.y=3.4,t},getRoad:function(){var t=new THREE.Group,r=n.materials.initMaterials("standard",16777215);return e.load("./assets/models/road_part.fbx",function(e){e.material=r,e.scale.x=1,e.scale.y=1,e.scale.z=1,r.metalness=.5,r.map=a.load("./assets/images/textures/formd_lambert1_BaseColor.png"),r.roughnessMap=a.load("./assets/images/textures/formd_lambert1_Roughness.png"),r.metalnessMap=a.load("./assets/images/textures/formd_lambert1_Metallic.png"),r.normalMap=a.load("./assets/images/textures/formd_lambert1_Normal.png"),r.heightMap=a.load("./assets/images/textures/formd_lambert1_Height.png"),e.castShadow=!0,e.receiveShadow=!0,e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=r,e.castShadow=!0,e.receiveShadow=!0)}),t.add(e)}),t}}}()},function(e,a,t){"use strict";!function(e){e&&e.__esModule}(t(2));var n=t(1),r=t(8),o=t(7);(function(e,a,t){var n,o,i,s=e.getDomStrings();(i=new THREE.Scene).background=(new THREE.Color).setHSL(.6,0,1),i.fog=new THREE.Fog(i.background,1,1e4);var d,l=new THREE.FBXLoader,u=new THREE.TextureLoader,c=new THREE.Clock,m=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,1e5),p=(new THREE.Group,new THREE.WebGLRenderer({antialias:!0}));new THREE.OrbitControls(m,p.domElement);p.shadowMap.enabled=!0,p.shadowMap.enabled=!0,p.shadowMap.type=THREE.PCFSoftShadowMap,p.setSize(window.innerWidth,window.innerHeight),document.getElementById(s.webglContainer).appendChild(p.domElement),(d=new THREE.DirectionalLight(3381759,.1)).castShadow=!0,i.add(d),d.position.z=80,d.position.y=80;var f=new THREE.PlaneBufferGeometry(1e5,1e5),h=new THREE.MeshLambertMaterial({color:16777215});h.color.setHSL(.095,1,.75);var w=new THREE.Mesh(f,h);w.position.y=-33,w.rotation.x=-Math.PI/2,w.receiveShadow=!0,i.add(w);var g=a.getPointLight(1),E=t.initMaterials("basic","red");E.transparent=.1;var v=r.models.getBox(E,10,10,10);g.add(v);var b=function(){var e=new THREE.Group;e.name="trainGrp";var a=t.initMaterials("standard","white");return a.side=THREE.DoubleSide,l.load("./assets/models/vagon4ik6.fbx",function(t){t.material=a,t.scale.x=1,t.scale.y=1,t.scale.z=1,t.castShadow=!0,t.receiveShadow=!0,a.map=u.load("./assets/images/textures/train_albedo.png"),a.roughness=1,a.roughnessMap=u.load("./assets/images/textures/train_roughness.png"),a.metalnessMap=u.load("./assets/images/textures/train_metalness.png"),a.normalMap=u.load("./assets/images/textures/train_normal.png"),a.normalScale=new THREE.Vector2(1,1),t.traverse(function(e){e instanceof THREE.Mesh&&(e.material=a,e.castShadow=!0,e.receiveShadow=!0)}),e.add(t)}),e.position.y=28,e.position.z=0,e.position.x=60,e}();b.add(g),g.position.y=500;var H=r.models.getGlass(),S=r.models.getInsidePart();function T(){requestAnimationFrame(T);var e=c.getDelta();n&&n.update(e),p.render(i,m)}b.add(S),b.add(H),i.add(b),i.add(m),m.position.z=6e3,m.position.y=50;var M=new THREE.PlaneBufferGeometry(1e5,1e5);(o=new THREE.Water(M,{textureWidth:512,textureHeight:512,waterNormals:(new THREE.TextureLoader).load("./assets/images/textures/waternormals.jpg",function(e){e.wrapS=e.wrapT=THREE.RepeatWrapping}),alpha:.8,sunDirection:d.position.clone().normalize(),sunColor:16777215,waterColor:983070,distortionScale:.1,size:1,fog:void 0!==i.fog})).rotation.x=-Math.PI/2,i.add(o);var R=new THREE.HemisphereLight(16777215,16777215,.6);R.color.setHSL(.6,1,.6),R.groundColor.setHSL(210,100,80),R.position.set(0,50,0),i.add(R);var y=document.getElementById("vertexShader").textContent,x=document.getElementById("fragmentShader").textContent,_={topColor:{value:new THREE.Color(30719)},bottomColor:{value:new THREE.Color(16777215)},offset:{value:33},exponent:{value:.6}};_.topColor.value.copy(R.color),i.fog.color.copy(_.bottomColor.value);var L=new THREE.SphereBufferGeometry(4e4,32,15),P=new THREE.ShaderMaterial({uniforms:_,vertexShader:y,fragmentShader:x,side:THREE.BackSide}),C=new THREE.Mesh(L,P);function G(){m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),p.setSize(window.innerWidth,window.innerHeight)}i.add(C);var B=t.initMaterials("standard",16777215);return B.transparent=!0,B.opacity=.5,{init:function(){T(),window.onload=function(){window.addEventListener("resize",G,!1)}}}})(function(){var e={webglContainer:"webgl",color:"green",scale:4,flowX:1,flowY:1};return{getDomStrings:function(){return e}}}(),o.lights,n.materials).init()}]);