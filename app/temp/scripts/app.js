!function(e){var a={};function n(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=a,n.d=function(e,a,t){n.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,a){if(1&a&&(e=n(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var i in e)n.d(t,i,function(a){return e[a]}.bind(null,i));return t},n.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(a,"a",a),a},n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},n.p="",n(n.s=9)}([,function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.materials={initMaterials:function(e,a){var n,t={color:void 0===a?"rgb(255, 255, 255)":a};switch(e){case"basic":n=new THREE.MeshBasicMaterial(t);break;case"lambert":n=new THREE.MeshLambertMaterial(t);break;case"phong":n=new THREE.MeshPhongMaterial(t);break;case"standard":n=new THREE.MeshStandardMaterial(t);break;default:n=new THREE.MeshBasicMaterial(t)}return n}}},function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}();var i=function(){function e(){return function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=new THREE.LoadingManager,this.events(),this.manager}return t(e,[{key:"events",value:function(){document.getElementById("webglWrapper");var e=document.createElement("div");this.manager.onStart=function(a,n,t){console.log("Started loading file: "+a+".\nLoaded "+n+" of "+t+" files."),e.className="splash-screen",document.body.appendChild(e),e.innerHTML='\n            <h3>Loading...</h3>\n            <div class="infinityChrome">\n    <div></div>\n    <div></div>\n    <div></div>\n</div>\n\n\x3c!-- Safari and others --\x3e\n<div class="infinity">\n    <div>\n        <span></span>\n    </div>\n    <div>\n        <span></span>\n    </div>\n    <div>\n        <span></span>\n    </div>\n</div>\n\n\x3c!-- Stuff --\x3e\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="display: none;">\n    <defs>\n        <filter id="goo">\n            <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur" />\n            <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />\n            <feBlend in="SourceGraphic" in2="goo" />\n        </filter>\n    </defs>\n</svg>\n            ',e.classList.add("loading")},this.manager.onLoad=function(){var e=document.querySelector(".splash-screen");document.body.removeChild(e)}}}]),e}();a.default=i},,,,,function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.lights={getDirectionalLight:function(e){var a=new THREE.DirectionalLight(16777190,e);return a.castShadow=!0,a.shadow.camera.left=-20,a.shadow.camera.bottom=-20,a.shadow.camera.right=20,a.shadow.camera.top=20,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,a},getSpotLight:function(e){var a=new THREE.PointLight(16777190,e);return a.castShadow=!0,a.shadow.bias=.001,a.castShadow=!0,a.shadow.camera.left=-20,a.shadow.camera.bottom=-20,a.shadow.camera.right=20,a.shadow.camera.top=20,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,a},getPointLight:function(e){return new THREE.PointLight("white",e)},getAmbientLight:function(e){return new THREE.AmbientLight(8437759,e)}}},function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.models=void 0;var t=n(1);var i=new(function(e){return e&&e.__esModule?e:{default:e}}(n(2)).default);a.models=function(){var e=new THREE.FBXLoader(i),a=new THREE.TextureLoader(i);return{getBox:function(e,a,n,t){var i=new THREE.BoxGeometry(a,n,t),o=new THREE.Mesh(i,e);return o.castShadow=!0,o},getText:function(){var n=new THREE.Group;n.name="platform";var i=t.materials.initMaterials("standard",16777215);return e.load("./assets/models/station.fbx",function(e){e.material=i,e.scale.x=1,e.scale.y=1,e.scale.z=1,e.castShadow=!0,e.receiveShadow=!0,e.position.y=.7,i.map=a.load("./assets/images/platform_diffuse.png"),i.roughnessMap=a.load("./assets/images/platform_specular.tga"),i.normalMap=a.load("./assets/images/platform_normal.png"),i.normalScale=new THREE.Vector2(.5,.5),e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=i,e.castShadow=!0,e.receiveShadow=!0)}),n.add(e)}),n.position.y=3.4,n},getSpusk:function(){var n=new THREE.Group;n.name="spuskGrp";var i=t.materials.initMaterials("standard","white");return e.load("./assets/models/spusk.fbx",function(e){e.material=i,e.scale.x=1,e.scale.y=1,e.scale.z=1,e.position.y=.7,i.side=THREE.DoubleSide,i.map=a.load("./assets/images/spusk_lambert1_BaseColor.png"),i.normalMap=a.load("./assets/images/spusk_lambert1_Normal.png"),i.roughness=1,e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=i,e.castShadow=!0,e.receiveShadow=!0)}),n.add(e)}),n.position.y=3.4,n},getFence:function(){var n=new THREE.Group;n.name="fenceGrp";var i=t.materials.initMaterials("standard","white");return e.load("./assets/models/fence.fbx",function(e){e.material=i,e.scale.x=1,e.scale.y=1,e.scale.z=1,e.position.y=.7,e.castShadow=!0,e.receiveShadow=!0,i.map=a.load("./assets/images/fence_lambert6_BaseColor.png"),i.roughness=1,i.normalMap=a.load("./assets/images/fence_lambert6_Normal.png"),i.aoMap=a.load("./assets/images/fence_lambert6_AO.png"),i.normalScale=new THREE.Vector2(1,1),e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=i,e.castShadow=!0,e.receiveShadow=!0)}),n.add(e)}),n.position.y=3.4,n},getTrain:function(){var n=new THREE.Group;n.name="trainGrp";var i=t.materials.initMaterials("standard","white");return e.load("./assets/models/train_test.fbx",function(e){e.material=i,e.scale.x=.1,e.scale.y=.1,e.scale.z=.1,i.map=a.load("./assets/images/train_test_blinn1_BaseColor.png"),i.roughnessMap=a.load("./assets/images/train_test_blinn1_Roughness.png"),i.normalMap=a.load("./assets/images/train_test_blinn1_Normal.png"),i.normalScale=new THREE.Vector2(1,1),e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=i,e.castShadow=!0,e.receiveShadow=!0)}),n.add(e)}),n.position.y=.2,n.position.z=15,n.position.x=60,n}}}()},function(e,a,n){"use strict";!function(e){e&&e.__esModule}(n(2));var t=n(1),i=n(8),o=n(7);(function(e,a,n){var t,o=e.getDomStrings(),r=new THREE.Scene;r.fog=new THREE.FogExp2(14672601,.005),r.fog.near=.1;new THREE.FBXLoader,new THREE.TextureLoader;var s=new THREE.Clock,l=new THREE.PerspectiveCamera(35,window.innerWidth/window.innerHeight,1,1e4),d=new THREE.Group;console.log(d);var c,u=new THREE.WebGLRenderer({antialias:!0});u.shadowMap.enabled=!0,u.setClearColor(15987699),u.shadowMap.enabled=!0,u.shadowMap.type=THREE.PCFSoftShadowMap,u.setSize(window.innerWidth,window.innerHeight),document.getElementById(o.webglContainer).appendChild(u.domElement),(c=new THREE.DirectionalLight(16777215,1)).castShadow=!0;a.getPointLight(1);var m=n.initMaterials("standard","yellow"),p=i.models.getBox(m,30,30,30);m.transparent=!0,m.opacity=.6,m.alphaTest=.3;var f=a.getDirectionalLight(1),g=i.models.getBox(m,1,1,1);f.add(g),f.position.y=3,f.position.z=-3,r.add(c);var h=a.getAmbientLight(.3);r.add(h),c.add(p),r.add(c);var w=i.models.getText();r.add(w);var v=i.models.getFence();r.add(v);var E=i.models.getTrain();r.add(E);var b=new THREE.PlaneBufferGeometry(1e4,1e4);(t=new THREE.Water(b,{textureWidth:512,textureHeight:512,waterNormals:(new THREE.TextureLoader).load("textures/waternormals.jpg",function(e){e.wrapS=e.wrapT=THREE.RepeatWrapping}),alpha:.8,sunDirection:c.position.clone().normalize(),sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:void 0!==r.fog})).rotation.x=-Math.PI/2,r.add(t);var T=document.getElementById("cowbell"),y=new THREE.Sky;(L=y.material.uniforms).turbidity.value=10,L.rayleigh.value=.8,L.luminance.value=1,L.mieCoefficient.value=.005,L.mieDirectionalG.value=.8;var M={distance:400,inclination:.44,azimuth:.205},S=new THREE.CubeCamera(.1,1,512);function H(){var e=Math.PI*(M.inclination-.5),a=2*Math.PI*(M.azimuth-.5);c.position.x=M.distance*Math.cos(a),c.position.y=M.distance*Math.sin(a)*Math.sin(e),c.position.z=M.distance*Math.sin(a)*Math.cos(e),y.material.uniforms.sunPosition.value=c.position.copy(c.position),t.material.uniforms.sunDirection.value.copy(c.position).normalize(),S.update(u,y)}S.renderTarget.texture.generateMipmaps=!0,S.renderTarget.texture.minFilter=THREE.LinearMipMapLinearFilter,r.background=S.renderTarget,H();a.getPointLight(5);var R=n.initMaterials("standard",16777215);R.transparent=!0,R.opacity=.5;var _=new dat.GUI;(x=_.addFolder("Sky")).add(M,"inclination",0,.5,1e-4).onChange(H),x.add(M,"azimuth",0,1,1e-4).onChange(H),x.open();var x,L=t.material.uniforms;return(x=_.addFolder("Water")).add(L.distortionScale,"value",0,8,.1).name("distortionScale"),x.add(L.size,"value",.1,10,.1).name("size"),x.add(L.alpha,"value",.9,1,.001).name("alpha"),x.open(),console.log("asd"),{init:function(){window.onload=function(){window.addEventListener("resize",a,!1)};var e=new THREE.OrbitControls(l,u.domElement);function a(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}l.position.set(-0,1,140),function e(a,n,i,o,r){T.oninput=function(){n.getObjectByName("stuffLight");p.position.y=this.value,console.log(c.position.y)};performance.now();t.material.uniforms.time.value+=.5/60;r.getDelta();a.render(n,i);o.update();requestAnimationFrame(function(){e(a,n,i,o,r)})}(u,r,l,e,s)}}})(function(){var e={webglContainer:"webgl",color:"green",scale:4,flowX:1,flowY:1};return{getDomStrings:function(){return e}}}(),o.lights,t.materials).init()}]);